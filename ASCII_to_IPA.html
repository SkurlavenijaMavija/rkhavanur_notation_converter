<!DOCTYPE html>

<head>
    <meta charset="UTF-8">
    <title>ASCII転写からIPA転写への変換器</title>
    <script>
        const latin_to_ipa = {
            "a": "æ", "e": "e̞", "i": "ɪ", "y": "y", /* 第1-2群母音 */
            "Q": "ɑ", "o": "o̞", "u": "ʊ", "W": "ɯ", /* 第3-4群母音 */
            ":": "ː", "~": "\u{0303}", "^": "\u{0303}ː", /* 母音系の諸記号; U+0303 COMBINING TILDE hem. */
            "E": "ə", /* 第5群母音 */
            "p": "p", "t": "t", "T": "ʈ", "c": "c", "k": "k", "K": "q", /* 第1群子音 */
            "b": "b", "d": "d", "D": "ɖ", "J": "ɟ", "g": "ɡ", "G": "ɢ", /* 第2群子音 */
            "f": "ɸ", "s": "s", "S": "ʂ", "C": "ç", "x": "x", "X": "χ", /* 第3群子音 */
            "v": "β", "z": "z", "Z": "ʐ", "I": "ʝ", "V": "ɣ", "R": "ʁ", /* 第4群子音 */
            "_": "\u{0361}", /* 第5-6群子音; U+0361 COMBINING DOUBLE INVERTED BREVE hem. */
            "m": "m", "n": "n", "N": "ŋ", /* 第7群子音 */
            "r": "r", "L": "l", /* 第8群子音 */
            "h": "h", "H": "ɦ", "q": "ʔ", /* 第9群子音 */
            "j": "j", "w": "ʋ", /* 第10群子音 */
            "=": "=", "-": "-", "'": "ˈ", " ": " ", "\n": "\n", /* 諸記号 */
        };

        const converter = (input) => input.replace(/p\^/g, "p_f").replace(/t\^/g, "t_s").replace(/T\^/g, "T_S").replace(/c\^/g, "c_C").replace(/k\^/g, "k_x").replace(/K\^/g, "K_X").replace(/b\^/g, "b_v").replace(/d\^/g, "d_z").replace(/D\^/g, "D_Z").replace(/J\^/g, "J_I").replace(/g\^/g, "g_V").replace(/G\^/g, "G_R").split("").map(
            (c) => latin_to_ipa[c] ?? "*"
        ).join("");


        const vowels = {
            1: (word) => word.replace(/1\./g, "a").replace(/2\./g, "e").replace(/3\./g, "i").replace(/4\./g, "y").replace(/1:/g, "a:").replace(/2:/g, "e:").replace(/3:/g, "i:").replace(/4:/g, "y:"),
            2: (word) => word.replace(/1\./g, "a~").replace(/2\./g, "e~").replace(/3\./g, "i~").replace(/4\./g, "y~").replace(/1:/g, "a^").replace(/2:/g, "e^").replace(/3:/g, "i^").replace(/4:/g, "y^"),
            3: (word) => word.replace(/1\./g, "Q").replace(/2\./g, "o").replace(/3\./g, "u").replace(/4\./g, "W").replace(/1:/g, "Q:").replace(/2:/g, "o:").replace(/3:/g, "u:").replace(/4:/g, "W:"),
            4: (word) => word.replace(/1\./g, "Q~").replace(/2\./g, "o~").replace(/3\./g, "u~").replace(/4\./g, "W~").replace(/1:/g, "Q^").replace(/2:/g, "o^").replace(/3:/g, "u^").replace(/4:/g, "W^")
        };
        const consonants = { 
            1: (word) => word.replace(/1/g, "p").replace(/2/g, "t").replace(/3/g, "T").replace(/4/g, "c").replace(/5/g, "k").replace(/6/g, "K"),
            2: (word) => word.replace(/1/g, "b").replace(/2/g, "d").replace(/3/g, "D").replace(/4/g, "J").replace(/5/g, "g").replace(/6/g, "G"), 
            3: (word) => word.replace(/1/g, "f").replace(/2/g, "s").replace(/3/g, "S").replace(/4/g, "C").replace(/5/g, "x").replace(/6/g, "X"),
            4: (word) => word.replace(/1/g, "v").replace(/2/g, "z").replace(/3/g, "Z").replace(/4/g, "I").replace(/5/g, "V").replace(/6/g, "R"), 
            5: (word) => word.replace(/1/g, "p^").replace(/2/g, "t^").replace(/3/g, "T^").replace(/4/g, "c^").replace(/5/g, "k^").replace(/6/g, "K^"),
            6: (word) => word.replace(/1/g, "b^").replace(/2/g, "d^").replace(/3/g, "D^").replace(/4/g, "J^").replace(/5/g, "g^").replace(/6/g, "G^") 
        };


        const harmonic_converter = (input) => input.split("\n").map((line) => (line).split(" ")
            .map((word) =>
                word.match(/\(1-1\)/) ? consonants[1](vowels[1](word.replace(/\(1-1\)/, ""))) : 
                word.match(/\(pa\)/) ? consonants[1](vowels[1](word.replace(/\(pa\)/, ""))) : 
                word.match(/\(1-2\)/) ? consonants[1](vowels[2](word.replace(/\(1-2\)/, ""))) : 
                word.match(/\(ba\)/) ? consonants[1](vowels[2](word.replace(/\(ba\)/, ""))) : 
                word.match(/\(1-3\)/) ? consonants[1](vowels[3](word.replace(/\(1-3\)/, ""))) : 
                word.match(/\(fa\)/) ? consonants[1](vowels[3](word.replace(/\(fa\)/, ""))) : 
                word.match(/\(1-4\)/) ? consonants[1](vowels[4](word.replace(/\(1-4\)/, ""))) : 
                word.match(/\(va\)/) ? consonants[1](vowels[4](word.replace(/\(va\)/, ""))) : 
                word.match(/\(1-5\)/) ? consonants[1](vowels[5](word.replace(/\(1-5\)/, ""))) : 
                word.match(/\(p\^a\)/) ? consonants[1](vowels[5](word.replace(/\(t\^a\)/, ""))) : 
                word.match(/\(1-6\)/) ? consonants[1](vowels[6](word.replace(/\(1-6\)/, ""))) : 
                word.match(/\(b\^a\)/) ? consonants[1](vowels[6](word.replace(/\(b\^a\)/, ""))) : 
                word.match(/\(2-1\)/) ? consonants[2](vowels[1](word.replace(/\(2-1\)/, ""))) : 
                word.match(/\(pa\~\)/) ? consonants[2](vowels[1](word.replace(/\(pa\~\)/, ""))) : 
                word.match(/\(2-2\)/) ? consonants[2](vowels[2](word.replace(/\(2-2\)/, ""))) : 
                word.match(/\(ba\~\)/) ? consonants[2](vowels[2](word.replace(/\(ba\~\)/, ""))) : 
                word.match(/\(2-3\)/) ? consonants[2](vowels[3](word.replace(/\(2-3\)/, ""))) : 
                word.match(/\(fa\~\)/) ? consonants[2](vowels[3](word.replace(/\(fa\~\)/, ""))) : 
                word.match(/\(2-4\)/) ? consonants[2](vowels[4](word.replace(/\(2-4\)/, ""))) : 
                word.match(/\(va\~\)/) ? consonants[2](vowels[4](word.replace(/\(va\~\)/, ""))) : 
                word.match(/\(2-5\)/) ? consonants[2](vowels[5](word.replace(/\(2-5\)/, ""))) : 
                word.match(/\(p\^a\~\)/) ? consonants[2](vowels[5](word.replace(/\(t\^a\~\)/, ""))) : 
                word.match(/\(2-6\)/) ? consonants[2](vowels[6](word.replace(/\(2-6\)/, ""))) : 
                word.match(/\(b\^a\~\)/) ? consonants[2](vowels[6](word.replace(/\(b\^a\~\)/, ""))) : 
                word.match(/\(3-1\)/) ? consonants[3](vowels[1](word.replace(/\(3-1\)/, ""))) : 
                word.match(/\(pQ\)/) ? consonants[3](vowels[1](word.replace(/\(pQ\)/, ""))) : 
                word.match(/\(3-2\)/) ? consonants[3](vowels[2](word.replace(/\(3-2\)/, ""))) : 
                word.match(/\(bQ\)/) ? consonants[3](vowels[2](word.replace(/\(bQ\)/, ""))) : 
                word.match(/\(3-3\)/) ? consonants[3](vowels[3](word.replace(/\(3-3\)/, ""))) : 
                word.match(/\(fQ\)/) ? consonants[3](vowels[3](word.replace(/\(fQ\)/, ""))) : 
                word.match(/\(3-4\)/) ? consonants[3](vowels[4](word.replace(/\(3-4\)/, ""))) : 
                word.match(/\(vQ\)/) ? consonants[3](vowels[4](word.replace(/\(vQ\)/, ""))) : 
                word.match(/\(3-5\)/) ? consonants[3](vowels[5](word.replace(/\(3-5\)/, ""))) : 
                word.match(/\(p\^Q\)/) ? consonants[3](vowels[5](word.replace(/\(t\^Q\)/, ""))) : 
                word.match(/\(3-6\)/) ? consonants[3](vowels[6](word.replace(/\(3-6\)/, ""))) : 
                word.match(/\(b\^Q\)/) ? consonants[3](vowels[6](word.replace(/\(b\^Q\)/, ""))) : 
                word.match(/\(4-1\)/) ? consonants[4](vowels[1](word.replace(/\(4-1\)/, ""))) : 
                word.match(/\(pQ\~\)/) ? consonants[4](vowels[1](word.replace(/\(pQ\~\)/, ""))) : 
                word.match(/\(4-2\)/) ? consonants[4](vowels[2](word.replace(/\(4-2\)/, ""))) : 
                word.match(/\(bQ\~\)/) ? consonants[4](vowels[2](word.replace(/\(bQ\~\)/, ""))) : 
                word.match(/\(4-3\)/) ? consonants[4](vowels[3](word.replace(/\(4-3\)/, ""))) : 
                word.match(/\(fQ\~\)/) ? consonants[4](vowels[3](word.replace(/\(fQ\~\)/, ""))) : 
                word.match(/\(4-4\)/) ? consonants[4](vowels[4](word.replace(/\(4-4\)/, ""))) : 
                word.match(/\(vQ\~\)/) ? consonants[4](vowels[4](word.replace(/\(vQ\~\)/, ""))) : 
                word.match(/\(4-5\)/) ? consonants[4](vowels[5](word.replace(/\(4-5\)/, ""))) : 
                word.match(/\(p\^Q\~\)/) ? consonants[4](vowels[5](word.replace(/\(t\^Q\~\)/, ""))) : 
                word.match(/\(4-6\)/) ? consonants[4](vowels[6](word.replace(/\(4-6\)/, ""))) : 
                word.match(/\(b\^Q\~\)/) ? consonants[4](vowels[6](word.replace(/\(b\^Q\~\)/, ""))) : word
            ).join(" "))
            .join("\n"); 
    </script>
</head>

<body style="font-family: Arial, Helvetica, sans-serif;">
    <textarea id="in" spellcheck="false" rows="10" cols="80" style="font-family: Arial, Helvetica, sans-serif;"
        onkeyup="document.getElementById('out').value = converter(harmonic_converter(document.getElementById('in').value))"></textarea><br>
    <textarea readonly id="out" spellcheck="false" rows="10" cols="80" style="font-family: Arial, Helvetica, sans-serif;"></textarea><br>
上のテキストボックスにASCII転写で螺語を書くと下のテキストボックスにIPA転写が生成されます。外来語判定は実装していないので、外来語を原語表記している文を変換する際は注意してください。例えば"(1-2)61:1=n3: b^o:HEn"と入力すると"qæ̃ːp=nɪ̃ː b͡βo̞ːɦən"と変換されます。
</body>